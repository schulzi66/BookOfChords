<div class="exercise-details-grid"
     [@fadeInOnEnter]
     [style.font-family]="(this.configurationService.configuration$ | async)?.fontFamily">

  <h4 class="exercise-name">{{exercise.name}}</h4>
  <div class="exercise-description">{{exercise.description}}</div>

  <div class="exercise-mode-template"
       [ngSwitch]="this.currentMode">

    <!-- Intervall -->
    <ng-template [ngSwitchCase]="ExerciseModes.INTERVAL">
      <div class="interval-template">
        <mat-form-field class="duration"
                        appearance="outline">
          <mat-label>{{'exercise_duration' | transloco}}</mat-label>
          <input matInput
                 required
                 type="number"
                 name="intervalDuration"
                 [(ngModel)]="this.exerciseDuration">
        </mat-form-field>

        <mat-form-field class="increase-time"
                        appearance="outline">
          <mat-label>{{'exercise_increase_time' | transloco}}</mat-label>
          <input matInput
                 required
                 type="number"
                 name="intervalIncreaseTime"
                 [(ngModel)]="this.intervalTime">
        </mat-form-field>

        <mat-form-field class="increase-bpm"
                        appearance="outline">
          <mat-label>{{'exercise_increase_bpm' | transloco}}</mat-label>
          <input matInput
                 required
                 type="number"
                 name="intervalIncreaseBpm"
                 [(ngModel)]="this.intervalBpm">
        </mat-form-field>

        <mat-label class="interval-progress-header">{{'exercise_interval_progress' | transloco}}:</mat-label>

        <mat-progress-spinner class="spinner"
                              mode="determinate"
                              [value]="this.intervalDurationPercentage"></mat-progress-spinner>


        <div class="total-progress">
          <mat-label>{{'exercise_total_progress' | transloco}}:</mat-label>
          <mat-progress-bar mode="determinate"
                            [value]="this.exerciseDurationPercentage"></mat-progress-bar>
        </div>

        <shared-metronome class="metronom"
                          #metronom
                          [bpm]="this.exercise.currentBpm"
                          [showPlay]="this.exerciseDuration"
                          (onBpmChanged)="this.exercise.currentBpm = $event"
                          (onStart)="this.startIntervalMode()"
                          (onStop)="this.stopExercise()"></shared-metronome>
      </div>
    </ng-template>

    <!-- Timebased -->
    <ng-template [ngSwitchCase]="ExerciseModes.TIMEBASED">

      <div class="timebased-template">
        <mat-form-field appearance="outline">
          <mat-label>{{'exercise_duration' | transloco}}</mat-label>
          <input matInput
                 required
                 type="number"
                 name="timebasedDuration"
                 [(ngModel)]="this.exerciseDuration">
        </mat-form-field>

        <div class="total-progress">
          <mat-label>{{'exercise_total_progress' | transloco}}:</mat-label>
          <mat-progress-bar mode="determinate"
                            [value]="this.exerciseDurationPercentage"></mat-progress-bar>
        </div>

        <shared-metronome #metronom
                          [bpm]="this.exercise.currentBpm"
                          [showPlay]="this.exerciseDuration"
                          (onBpmChanged)="this.exercise.currentBpm = $event"
                          (onStart)="this.startTimebasedMode()"
                          (onStop)="this.stopExercise()"></shared-metronome>
      </div>
    </ng-template>

    <!-- Manual Mode -->
    <ng-template ngSwitchDefault>
      <shared-metronome [bpm]="this.exercise.currentBpm"
                        (onBpmChanged)="this.exercise.currentBpm = $event"></shared-metronome>
    </ng-template>
  </div>

  <div class="exercise-audio"
       *ngIf="this.exercise.sound">

    <audio class="audio"
           controls>
      <source *ngIf="exercise.sound"
              [src]="exercise.sound">
    </audio>
  </div>

  <div class="exercise-image"
       *ngIf="this.exercise.pictureUrl">
    <img class="img"
         [src]="this.exercise.pictureUrl">
  </div>


  <ngx-extended-pdf-viewer class="exercise-pdf"
                           *ngIf="this.exercise.pdfUrl"
                           [src]="exercise?.pdfUrl"
                           useBrowserLocale="true"
                           height="100%"></ngx-extended-pdf-viewer>

</div>